<!DOCTYPE html>
<html>
  <head>
    <title>Intro to R</title>
    <meta charset="utf-8">
    <meta name="author" content="R for the Rest of Us" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
    <script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
    <link rel="stylesheet" href="style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Intro to R
### R for the Rest of Us

---





layout: true
  
&lt;div class="dk-footer"&gt;
&lt;span&gt;
&lt;a href="https://rfortherestofus.com/" target="_blank"&gt;R for the Rest of Us
&lt;/a&gt;
&lt;/span&gt;
&lt;/div&gt; 

---









class: inverse, middle, center

# Installation

---

## R

The first thing you need to do is download the R software. Go to the [Comprehensive R Archive Network (aka “CRAN”) website](https://cran.cnr.berkeley.edu/) and download the software for your operating system (Windows, Mac, or Linux).

![](images/download-r.png)


---


### Working Directly in R

![](images/r-console.png)


---

### Working Directly in R

1. Enter: 2 + 2

2. Hit return

3. View result

---

class:inverse

### Your Turn

1. Download and Install R

1. Open R

1. Use any mathematical operators (+, -, /, and *) to create an expression and make sure it works as expected


---


## RStudio

--

.center[
![](images/engine-dashboard.png)

.small[Courtesy [Modern Dive](http://moderndive.com/2-getting-started.html#what-are-r-and-rstudio)]
]

---

### Tour of RStudio

![](images/rstudio-panes.png)



---

class:inverse

### Your Turn

1. Download and Install RStudio

1. Open RStudio

1. Working in the console pane, use any mathematical operators (+, -, /, and *) to create an expression and make sure it works as expected


---

# Projects

--

Projects allow you to keep a collection of files all together, including: 

--

- R scripts

--

- RMarkdown files (more on those soon)

--

- Data files

--

- And much more!


---

## Sample Project

![](images/rstudio-panes.png)

---


## How to Create a Project


1. File -&gt; New Project

2. Quit RStudio, Double-click .Rproj file to reopen project

---

class:inverse

## Your Turn

1. Create a new project (doesn't matter if it's in a new or existing directory)

2. Quit RStudio, double-click the .Rproj file and reopen your project


---

# Download Course Project

--

Enter the following into the R console.


```r
install.packages("usethis")
library(usethis)
use_course("http://bit.ly/intro-to-R")
```

???

You'll now have a copy of the project created for this course that we'll use from here on out



---


# Two File Types

There are two main file types that you'll work with: 

.pull-left[
**R scripts (.R)**

Text is assumed to be executable R code unless you comment it (more on this soon)


```r
# This is a comment

data &lt;- read_csv("data.csv")
```
]

--

.pull-right[

**RMarkdown files (.Rmd)**

Text is assumed to be text unless you put it in a code chunk (more on this soon)

![](images/code-chunk.png)



]


---

## R Scripts


Create new script file: File -&gt; New File -&gt; R Script

![](images/new-script.gif)

---


# How to Run Code

Run the code: control + enter on Windows,  command + enter on Mac keystrokes or use Run button

![](images/run-code.gif)

???

Note that you don't have to highlight code. 

You can just hit run anywhere on line to run code. 

---

# Comments

Do them for others, and for your future self. 


```r
# This is a comment. 
# You might write something like: examining my dataset 

head(data, n = 5)
```


---

# Packages

Packages add functionality that is not present in base R. 

They're where much of the power of R is found.

--

.center[
![](images/phone-apps.png)

.small[Courtesy [Modern Dive](http://moderndive.com/2-getting-started.html#packages)]
]


---

## Packages


Packages we'll use for this course:

--

.pull-left[
[`tidyverse`](https://www.tidyverse.org/)

It's actually several packages in one. 

We'll use [`readr`](https://readr.tidyverse.org/) to import our data. 
]

--

.pull-right[
[`skimr`](https://github.com/ropensci/skimr)

Provides easy summary statistics.
]

---


## Install Packages

The syntax to install packages is as follows. 


```r
install.packages("tidyverse")
install.packages("skimr")
```

The package name must be in quotes.

--

Packages should be installed **once per computer** (i.e. once you've installed a package, you don't need to do it again on the same computer).

---

## Load Packages

To load packages, use the following syntax:


```r
library(tidyverse)
library(skimr)
```

Package names don't need to be quoted here (though they can be).

--

Packages should be loaded **once per session** (i.e. every time you start working in R, you need to load any packages you want to use). 



---



class:inverse

## Your Turn

1. Open the project you downloaded before (it should be on your desktop)

1. Open the exercises.R file

1. Install the tidyverse and skimr packages using the install.packages function

1. Load the tidyverse and skimr packages using the library function

---

# Import Data

Let's read data from a CSV file. 





```r
faketucky &lt;- read_csv("data/faketucky.csv")
```

We now have a data frame/tibble called `faketucky` that we can work with in R.



???

- Tibbles are ["modern data frames"](https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html). The main difference for our purposes is that tibbles print much more nicely within R. 

- We'll use the terms tibble and data frame interchangeably. 

- For Excel files, try `read_excel` from the `readxl` package. 

- For SPSS files, try `read_sav` from the `haven` package.


---


## R is Case Sensitive

**R is case sensitive** so choose one of the following for all objects and **be consistent**.
.pull-left[
**Option**

snake_case 

camelCase

periods.in.names
]
.pull-right[

**Example**

student_data

studentData

student.data
]




---


## Directories

If the data file is in the working directory, you only need to specify its name.


```r
faketucky &lt;- read_csv("faketucky.csv")
```

--

If the data file is not in the working directory, you need to specify full path name. 

--

When specifying the path name use of forward slash (“/”) not backslash (“\”).


```r
faketucky &lt;- read_csv("data/faketucky.csv")
```

---
class:inverse

## Your Turn

1. Open the exercises.R file

1. Import the faketucky data into a data frame called faketucky.


---

# Objects and Functions

--

&gt; To understand computations in R, two slogans are helpful:

--

&gt; Everything that exists is an **object**, and 

--

&gt; Everything that happens is a **function** call.

John Chambers, quoted in [Hadley Wickham's Advanced R](http://adv-r.had.co.nz/Functions.html).


---

## Objects and Functions

![](images/objects-functions.png)

.pull-left[
Everything that exists is an **object**
]
.pull-right[
Everything that happens is a **function** call
]



---

## Assignment Operator

We assign the result of the **function** (`read_csv`) to the **object** (`data`)

![](images/assignment-operator.png)

---

# Where Does our Data Live?

Data we have imported is available in the environment/history pane.

![](images/rstudio-panes.png)

---

# Examine Our Data

There are many ways to look at our data. We'll talk about a few.

---

## `head`

`head` shows us the first X rows. 

```r
head(faketucky, 5)
```

```
## # A tibble: 5 x 12
##   `Student ID` `First High Sch… `School Distric…  Male `Race Ethnicity`
##          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;           
## 1         1622 Jackson          Jackson              1 Multiple/Native…
## 2         1877 Jackson          Jackson              1 White           
## 3         1941 Jackson          Jackson              1 White           
## 4         3442 Jackson          Jackson              0 White           
## 5         4623 Jackson          Jackson              1 White           
## # … with 7 more variables: `Free and Reduced Lunch` &lt;dbl&gt;, `Percent
## #   Absent` &lt;dbl&gt;, GPA &lt;dbl&gt;, `ACT Reading Score` &lt;dbl&gt;, `ACT Math
## #   Score` &lt;dbl&gt;, `Received High School Diploma` &lt;dbl&gt;, `Enrolled in
## #   College` &lt;dbl&gt;
```

---

## `tail`

`tail` shows us the last X rows. 

```r
tail(faketucky, 5)
```

```
## # A tibble: 5 x 12
##   `Student ID` `First High Sch… `School Distric…  Male `Race Ethnicity`
##          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;           
## 1        89364 Lookout Point    Lookout Point        1 Hispanic        
## 2        94764 Lookout Point    Lookout Point        0 White           
## 3        97538 Lookout Point    Lookout Point        1 White           
## 4       101342 Lookout Point    Lookout Point        1 White           
## 5       104903 Lookout Point    Lookout Point        1 Hispanic        
## # … with 7 more variables: `Free and Reduced Lunch` &lt;dbl&gt;, `Percent
## #   Absent` &lt;dbl&gt;, GPA &lt;dbl&gt;, `ACT Reading Score` &lt;dbl&gt;, `ACT Math
## #   Score` &lt;dbl&gt;, `Received High School Diploma` &lt;dbl&gt;, `Enrolled in
## #   College` &lt;dbl&gt;
```

---

## `View`

`View` (note capital V) opens the RStudio viewer (or click on a data frame in the environment pane).


```r
View(faketucky)
```

---

## `skimr`

The skimr package provides more detailed information about our data frame. It is also broken up by the type of variable.


```r
skim(faketucky)
```

---


```
## Skim summary statistics
##  n obs: 57855 
##  n variables: 12 
## 
## ── Variable type:character ───────────────────────────────────────────────────────────────────────────────────────────────────────────
##                    variable missing complete     n min max empty n_unique
##  First High School Attended       0    57855 57855   4  14     0      393
##              Race Ethnicity     794    57061 57855   5  24     0        5
##             School District       0    57855 57855   4  13     0      171
## 
## ── Variable type:numeric ─────────────────────────────────────────────────────────────────────────────────────────────────────────────
##                      variable missing complete     n     mean       sd p0
##                ACT Math Score       0    57855 57855   258.78   420.65  2
##             ACT Reading Score       0    57855 57855   257.85   420.77  1
##           Enrolled in College       0    57855 57855   255.74   435.54  0
##        Free and Reduced Lunch       0    57855 57855    15.45   120.82  0
##                           GPA       0    57855 57855    40.22   189.95  0
##                          Male       0    57855 57855     0.76    15.54  0
##                Percent Absent       0    57855 57855    10.68    46.19  0
##  Received High School Diploma       0    57855 57855     0.74     0.44  0
##                    Student ID       0    57855 57855 55922.15 32332.71  1
##       p25      p50      p75   p100     hist
##     16       22       34       999 ▇▁▁▁▁▁▁▂
##     16       20       33       999 ▇▁▁▁▁▁▁▂
##      0        1      999       999 ▇▁▁▁▁▁▁▃
##      0        1        1       999 ▇▁▁▁▁▁▁▁
##      2.02     2.7      3.36    999 ▇▁▁▁▁▁▁▁
##      0        1        1       999 ▇▁▁▁▁▁▁▁
##      3.27     6.28    11.35   3153 ▇▁▁▁▁▁▁▁
##      0        1        1         1 ▃▁▁▁▁▁▁▇
##  27909.5  56070    83872.5  111990 ▇▇▇▇▇▇▇▇
```

---

# Import Again

We need to do two things:

--

1. Tell R how to handle **missing data**

--

2. Make sure `read_csv` chooses the correct **data type** for each variable

---


## Missing Data

To tell R which data is missing, simply add an argument to the `read_csv` function as follows:


```r
faketucky &lt;- read_csv("data/faketucky.csv",
                     na = "No Info")
```

---

## Missing Data


```r
skim(faketucky)
```


---

## Data Types

You'll see the following message when you import your data, which will tell you the data types that the `read_csv` function has given to your imported data frame.


```r
Parsed with column specification:
cols(
  `Student ID` = col_double(),
  `First High School Attended` = col_character(),
  `School District` = col_character(),
  Male = col_double(),
  `Race Ethnicity` = col_character(),
  `Free and Reduced Lunch` = col_double(),
  `Percent Absent` = col_double(),
  GPA = col_double(),
  `ACT Reading Score` = col_double(),
  `ACT Math Score` = col_double(),
  `Received High School Diploma` = col_double(),
  `Enrolled in College` = col_double()
)
```

---

## Data Types

- Logical (e.g TRUE/FALSE)

--

- Integer (e.g. 2) 

--

- Double/Numeric (e.g. 2.5)

--

- Character (e.g. "Male")

--

- Factor (used to work with categorical variables)

---

## Data Types


```r
faketucky &lt;- read_csv("../data/faketucky.csv",
                     na = "999",
                     col_types = list(Male = col_character(),
                                      `Free and Reduced Lunch` = col_character()))

skim(faketucky)
```





---



# Getting Help

Use the ? to get help about anything you're confused about


```r
?read_csv
```

---



class:inverse

## Your Turn

Open the file code.R and work through it (there are instructions in comments telling you what to do).
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
